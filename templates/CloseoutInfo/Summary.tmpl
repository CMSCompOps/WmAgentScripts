<html>
<p>Last update on {{ updateCETTime }}(CET), {{ updateGMTTime }}(GMT)</p>, <a href="logs/checkor/"
    target="_blank">logs</a>
<br><br>
<table border=1>
    <thead>
        <tr>
            <th>workflow</th>
            <th>OutputDataSet</th>
            <th>%Compl</th>
            <th>acdc</th>
            <th>Events</th>
            <th>Lumis</th>
            <th>dbsF</th>
            <th>dbsIF</th>
            <th>phdF</th>
            <th>Updated</th>
            <th>Priority</th>
        </tr>
    </thead>
    {% for wf in wfs %}
    {% if wf.name in records %}
    {% for dataset in wf.datasets %}

    <tr bgcolor="{{ wf.bgColor }}"></tr>

    {% if loop.index0 is 0 %}
    <td rowspan="{{ wf.nDatasets }}"><a id="{{ wf.name }}">{{ wf.name }}</a><br>
        <a href="https://{{ reqmgrUrl }}/reqmgr2/fetch?rid={{ wf.name }}" target="_blank">dts</a>,
        <a href="https://{{ reqmgrUrl }}/reqmgr2/data/request/{{ wf.name }}" target="_blank">wfc</a>,
        <a href="https://cms-logbook.cern.ch/elog/Workflow+processing/?mode=full&reverse=0&reverse=1&npp=20&subtext={{ wf.prepId }}&sall=q"
            target="_blank">elog</a>,
        <a
            href="https://{{ reqmgrUrl }}/couchdb/workloadsummary/_design/WorkloadSummary/_show/histogramByWorkflow/{{ wf.name }}">perf</a>,
        <a href="assistance.html#{{ wf.name }}">{{ wf.status }}</a><br>
        <a href="https://cms-unified.web.cern.ch/cms-unified/showlog/?search={{ wf.prepId }}"
            target="_blank">history</a>,
        <a href="https://dmytro.web.cern.ch/dmytro/cmsprodmon/workflows.php?prep_id={{ wf.taskPrepId }}">{{
            wf.taskPrepId}}</a>,
        <a href="report/{{ wf }}">report</a>,

        {% if "ReReco" in taskPrepId %}
        <a href="{{ unifiedUrl }}/datalumi/lumi.{{ wf.taskPrepId }}.html">lumis</a>,
        {% endif %}

        <a href="https://its.cern.ch/jira/issues/?jql=(text~{{ wf.prepId }} OR text~task_{{ wf.prepId }} ) AND project = CMSCOMPPR"
            target="_blank">jira</a>
    </td>
    {% endif %}

    <td>{{ dataset.name.rsplit("/", 1)[0] }}/<b>{{ dataset.name.rsplit("/", 1)[1] }}<b></td>

    {% for col in cols %}
    {% if col.name is "acdc" %}
    <td><a
            href="https://{{ reqmgrUrl }}/reqmgr2/data/request?prep_id={{ taskPrepId }}&detail=false">{{dataset.col.value}}</a>
    </td>
    {% elif col.name is "percentage" and dataset.col.value < dataset.col.fractionPass %} <td><b>{{ dataset.col.value
            }}</b></td>
        {% elif col.name in ["events", "lumis"] %}
        <td>{{ dataset.col.produced }}/{{ dataset.col.expected }}</td>
        {% else %}
        <td>{{ dataset.col.value }}</td>
        {% endif %}
        {% endfor %}

        {% if loop.index0 is 0 %}
        <td rowspan="{{ wf.nDatasets }}">{{ dataset.updated }}</td>
        <td rowspan="{{ wf.nDatasets }}">{{ wf.priority }}</td>
        {% endif %}

        </tr>

        {% endfor %}
        {% endif %}
        {% endfor %}
</table>
<br><br><br><br><br><br>

</html>